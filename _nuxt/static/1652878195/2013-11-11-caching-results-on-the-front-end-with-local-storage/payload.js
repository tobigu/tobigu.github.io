__NUXT_JSONP__("/2013-11-11-caching-results-on-the-front-end-with-local-storage", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE){return {data:[{article:{slug:"2013-11-11-caching-results-on-the-front-end-with-local-storage",title:"Caching Results on the Frontend With Local Storage",bg:"bg-gray-300",archived:true,createdAt:am,updatedAt:am,toc:[],body:{type:"root",children:[{type:b,tag:s,props:{},children:[{type:a,value:"I'm working on a small web application as a side project at the moment, the app works with a large-ish dataset that will only change every now and then. I think this problem is a good opportunity to experiment with HTML5 local storage, so I've put together a POC to see how it can work before bringing it into the project."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"To do this, I'm going to use MySQL as the data source with a quick and dirty PHP script acting as a controller and model hybrid, and I'll use jQuery to handle the AJAX. But this solution can be used across just about any web stack, whether you use a relational database, or any database at all. I'm providing an overview of the method, not a detailed guide on a rigid implementation to be followed to the T."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Firstly, I should define what I mean by cache..."}]},{type:a,value:h},{type:b,tag:"ul",props:{},children:[{type:a,value:h},{type:b,tag:X,props:{},children:[{type:a,value:"Data will be initially sent to the browser"}]},{type:a,value:h},{type:b,tag:X,props:{},children:[{type:a,value:"When the user returns to the app, it checks if the data has changed"}]},{type:a,value:h},{type:b,tag:X,props:{},children:[{type:a,value:"If the data hasn't changed, the app doesn't cycle the data"}]},{type:a,value:h},{type:b,tag:X,props:{},children:[{type:a,value:"If the data has changed, cycle it (trash the cache, download the data fresh from the server)"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"So we need to tell if the data has changed between the cache and the data source. We'll use a hash for that."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"I'm using this very simple table in the example:"}]},{type:a,value:h},{type:b,tag:D,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ac]},children:[{type:b,tag:H,props:{},children:[{type:a,value:"some_table"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:"id "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"int"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,an]},children:[{type:a,value:"11"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" some_data "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"varchar"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,an]},children:[{type:a,value:"10"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"I use the following SQL to get a hash of the current state of this table:"}]},{type:a,value:h},{type:b,tag:D,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ac]},children:[{type:b,tag:H,props:{},children:[{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"SELECT"}]},{type:a,value:" SHA1"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:"CONCAT"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:"GROUP_CONCAT"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'id'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'some_data'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"AS"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:ad}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"FROM"}]},{type:a,value:" some_table\n"}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"SHA1 is the hash algorithm - it doesn't matter what algorithm we use here"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"CONCAT will flatten the values we get back into one long string ready for the hashing algorithm\nCONCAT_GROUP will flatten the results to a single row"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"From this, we'll get a hash like this:"}]},{type:a,value:h},{type:b,tag:D,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ao]},children:[{type:b,tag:H,props:{},children:[{type:a,value:"0fef95f4087ff39fab1bf51915c9a2650995de5d\n"}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Then when we do this:"}]},{type:a,value:h},{type:b,tag:D,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ac]},children:[{type:b,tag:H,props:{},children:[{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"INSERT"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"INTO"}]},{type:a,value:" some_tables "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:"some_data"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"VALUES"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'this is some data'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"And re-run the SELECT query, we get:"}]},{type:a,value:h},{type:b,tag:D,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ao]},children:[{type:b,tag:H,props:{},children:[{type:a,value:"9a2accaac936a97f39822232fad6e3d7907273e9\n"}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"And so on for any other changes to the database that result in a new instance or state of the table.\nBelow is the Javascript\u002FjQuery we use when the page loads:"}]},{type:a,value:h},{type:b,tag:D,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ap]},children:[{type:b,tag:H,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,I,J]},children:[{type:a,value:"document"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:"ready"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:" \n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"#data-source\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:"html"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\n    $"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:"ajax"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,ae,T]},children:[{type:a,value:"type"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'GET'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,ae,T]},children:[{type:a,value:"url"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'get_data.php'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,ae,T]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" \n            "},{type:b,tag:c,props:{className:[d,ar,T]},children:[{type:a,value:as}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,"boolean"]},children:[{type:a,value:"true"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,ar,T]},children:[{type:a,value:B}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:U}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,I,J]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:"done"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,"parameter"]},children:[{type:a,value:at}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:" \n        "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"var"}]},{type:a,value:" data "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"''"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"typeof"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,"maybe-class-name"]},children:[{type:a,value:"Storage"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"!=="}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"undefined\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,N,O]},children:[{type:a,value:"\u002F**\n             * If we recieve back the same hash we sent, the data hasn't updated\n             * and has not been sent in the response\n             *\u002F"}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ad}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"!="}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,I,J]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,I,J]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"==="}]},{type:b,tag:c,props:{className:[d,l,au,"nil"]},children:[{type:a,value:au}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,A,P]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"First time data+hash received by server\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:Q}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:av},{type:b,tag:c,props:{className:[d,A,P]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"Updating local storage from server\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:"\n\n                "},{type:b,tag:c,props:{className:[d,I,J]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,I,J]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:aw}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:Q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:C},{type:b,tag:c,props:{className:[d,A,P]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"No updates, using local storage\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,N,O]},children:[{type:a,value:"\u002F**\n             * This has either just been updated, or is the same as last time\n             *\u002F"}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,I,J]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:Q}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,A,P]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"Updated from server, no local storage\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,N,O]},children:[{type:a,value:"\u002F**\n             * No cache, just load the data, which will have been sent to us \n             * because the hash is null.\n             *\u002F"}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,A,P]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,t,j,p]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"The referenced get_data.php will check the hash sent back from the local storage, if it's null, it will send through a hash and the data. If the hash sent from local storage matches the current hash for the database table, it will only send back the hash (which will match what was sent from local storage). And if the hashes do not match, it will send back a new hash and the data."}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Here's get_data.php:"}]},{type:a,value:h},{type:b,tag:D,props:{className:[E]},children:[{type:b,tag:F,props:{className:[G,ap]},children:[{type:b,tag:H,props:{},children:[{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"isset"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:as}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    $responseObj "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"new"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"stdClass"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"!"}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"empty"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n        $current_hash "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:af},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:"=="}]},{type:a,value:"$current_hash"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,N,O]},children:[{type:a,value:"\u002F**\n             * The data is the same, so just send back the current hash for the\n             * front end to use for verification of no change\n             *\u002F"}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:S}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:Q}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,N,O]},children:[{type:a,value:"\u002F**\n             * The data has changed, send back the new hash for the new data\n             * and of course, the new data\n             *\u002F"}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:S}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:S}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:Q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:u},{type:b,tag:c,props:{className:[d,N,O]},children:[{type:a,value:"\u002F**\n         * There's no hash, must be a first time load or reload, send everything\n         *\u002F"}]},{type:a,value:"        \n        $responseObj"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:S}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n        $responseObj"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:S}]},{type:a,value:aA},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"header"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'Content-type: application\u002Fjson'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"json_encode"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:"$responseObj"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:Q}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aB},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:j}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:al}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"array"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'key'"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:S}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'value'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:j}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    $link "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"mysqli_connect"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'localhost'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'user'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'pass'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"mysqli_select_db"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"'localcache'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\n    $get_hash_sql "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\n    $result "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"mysqli_query"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:aC},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:" $get_hash_sql"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n\n    $row "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:w}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"mysqli_fetch_assoc"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:a,value:"$result"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:al}]},{type:a,value:" $row"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:j}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:f}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,l,v]},children:[{type:a,value:al}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"\"SELECT SHA1(CONCAT(GROUP_CONCAT('id', 'some_data'))) AS hash FROM some_table\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Here's an overview:"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:b,tag:"nuxt-link",props:{to:aE},children:[{type:b,tag:"img",props:{alt:"Local cache overview",src:aE},children:[]}]}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002F2013-11-11-caching-results-on-the-front-end-with-local-storage",extension:".md"}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","(",")","\n"," ","function","operator","keyword","string",";",".","property-access","{","}","p","method","\n        ","control-flow","=",",","\n            ","\n    ","console","'hash'","\n                ","div","nuxt-content-highlight","pre","line-numbers","code","dom","variable","window","localStorage","if","doc-comment","comment","class-name","else","-","\u003E","property",":","log","get_current_hash","li","data","getItem","[","]","\n\n    ","get_data","language-sql","hash","literal-property","\n\n        "," response","$_GET","\n            $responseObj","hash ","\n\n","return","2013-11-11T00:00:00.000Z","number","language-text","language-js","$","string-property","'ajax'","response","null","\n                    ","setItem","'data'","\n\n            ","\n            data ","data ","\n    print ","$link","get_hash_sql","\u002Fimages\u002Fposts\u002FScreen-Shot-2013-11-11-at-9.09.05-PM.png")));