<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>tobigu blog</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/2b22426.js" as="script"><link rel="preload" href="/_nuxt/cf78498.js" as="script"><link rel="preload" href="/_nuxt/b8ed1c3.js" as="script"><link rel="preload" href="/_nuxt/8205f1b.js" as="script"><link rel="preload" href="/_nuxt/d8e2892.js" as="script"><style data-vue-ssr-id="382a115c:0 0d8b0c4d:0 a57b151a:0">/*! tailwindcss v2.2.15 | MIT License | https://tailwindcss.com*//*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */*,::after,::before{box-sizing:border-box}html{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}body{font-family:system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji'}hr{height:0;color:inherit}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,'Liberation Mono',Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset{margin:0;padding:0}ol,ul{list-style:none;margin:0;padding:0}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}body{font-family:inherit;line-height:inherit}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}*,::after,::before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.static{position:static}.float-right{float:right}.m-12{margin:3rem}.mx-auto{margin-left:auto;margin-right:auto}.my-3{margin-top:.75rem;margin-bottom:.75rem}.mr-4{margin-right:1rem}.flex{display:flex}.table{display:table}.h-6{height:1.5rem}.w-6{width:1.5rem}@-webkit-keyframes spin{to{transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}@-webkit-keyframes ping{100%,75%{transform:scale(2);opacity:0}}@keyframes ping{100%,75%{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,100%{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,100%{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.space-y-20>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(5rem * var(--tw-space-y-reverse))}.rounded-b{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.border-t-4{border-top-width:4px}.bg-gray-300{--tw-bg-opacity:1;background-color:rgba(209,213,219,var(--tw-bg-opacity))}.bg-green-300{--tw-bg-opacity:1;background-color:rgba(110,231,183,var(--tw-bg-opacity))}.bg-blue-300{--tw-bg-opacity:1;background-color:rgba(147,197,253,var(--tw-bg-opacity))}.bg-purple-300{--tw-bg-opacity:1;background-color:rgba(196,181,253,var(--tw-bg-opacity))}.fill-current{fill:currentColor}.p-12{padding:3rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-40{padding-top:10rem;padding-bottom:10rem}.text-center{text-align:center}.text-sm{font-size:.875rem;line-height:1.25rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.font-thin{font-weight:100}.font-bold{font-weight:700}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}*,::after,::before{--tw-shadow:0 0 #0000}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}*,::after,::before{--tw-ring-inset:var(--tw-empty, );/*!*//*!*/--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59, 130, 246, 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}</style><link rel="preload" href="/_nuxt/static/1652920291/2015-02-14-getting-started-with-spritekit/state.js" as="script"><link rel="preload" href="/_nuxt/static/1652920291/2015-02-14-getting-started-with-spritekit/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1652920291/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><article class="m-12"><div><a href>â†µ Back</a> <p class="font-thin float-right">Published February 14, 2015, last updated February 14, 2015</p></div> <header class="p-12 py-40 text-center text-white my-3 space-y-20 bg-gray-300"><h1 class="text-5xl font-thin">Getting Started With SpriteKit</h1></header> <div role="alert" class="border-t-4 rounded-b px-4 py-3 shadow-md my-3"><div class="flex"><div class="py-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current h-6 w-6 mr-4"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path></svg></div> <div><p class="font-bold">This article was published a really long time ago.</p> <p class="text-sm">Its value then was likely questionable. Its value now is certainly pure nostalgia.</p></div></div></div> <div class="container mx-auto space-y-6 nuxt-content"><p>In this introduction to SpriteKit tutorial we'll do an introduction to the framework at a high level and write code to get a feel for what's possible.</p>
<h2 id="create-a-spritekit-project"><a href="#create-a-spritekit-project" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create a SpriteKit Project</h2>
<p>To get started with SpriteKit, create a new project in Xcode (Open Xcode -> Create a new Xcode project -> iOS, Application -> Game -> Enter anything for 'Product Name', change 'Game Technology' to SpriteKit.</p>
<img src="/images/posts/xcode-choose-project.png" alt="Create a new SpriteKit project" class="mx-auto">
<p>You should now have a project with the following files (or a slight variation, I'm running Xcode 6.1, earlier versions might not include the GameScene.sks or LaunchScreen.xib files)</p>
<ul>
<li>AppDelegate.h</li>
<li>AppDelegate.m</li>
<li><strong>GameScene.h</strong></li>
<li><strong>GameScene.m</strong></li>
<li><strong>GameViewController.h</strong></li>
<li><strong>GameViewController.m</strong></li>
<li>Main.storyboard</li>
<li>images.xcassets</li>
<li>LaunchScreen.xib</li>
</ul>
<p>If you run this project in the simulator untouched, you'll get a screen with the words "Hello World" and rotating spaceships will be added as you touch the screen.</p>
<img src="/images/posts/spritekit-default-project.png" alt="Default SpriteKit Project in iOS Simulator" class="mx-auto">
<p>You should stop and have a play with this project if you haven't already, but this is as far as we'll go with the default project template because we'll be trashing the lot and starting from scratch to build something similar for the sake of learning all the parts.</p>
<h2 id="delete-everything-we-just-did-and-start-from-scratch"><a href="#delete-everything-we-just-did-and-start-from-scratch" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Delete everything we just did and start from scratch.</h2>
<p>I've always thought the best way to learn about anything is to tear it down and rebuild it. Doing so in this case covers some fundamental knowledge needed for working with SpriteKit.</p>
<ol>
<li>Close (and if you like, delete) the project we created.</li>
<li>Start a new project 'SpriteKitFromScratch', choose the 'Empty Project' template.</li>
</ol>
<img src="/images/posts/xcode-empty-project.png" alt="Empty Project in Xcode" class="mx-auto">
3. First, we'll add a build target. Go to Editor -> Add Target and choose 'Single View Application'.
<img src="/images/posts/xcode-single-view-application.png" alt="Single View Application Build Target" class="mx-auto">
<em>There used to be an Empty Application target though it has been removed in recent versions of Xcode, the Single View Application is the closest to empty we can get and seeing as this is SpriteKit from scratch and not iOS Apps from scratch it's a good starting point working on the assumption you are already familiar with iOS concepts like View Controllers, the App Delegate, Info.plist and Storyboards. If not, the <a title="Start Developing iOS Apps Today" href="https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/index.html#//apple_ref/doc/uid/TP40011343" target="_blank">Start Developing iOS Apps Today</a> guide is a really good starting point for iOS development, it takes a similar 'from scratch' approach as I'm doing in this tutorial but for basic iOS app development.</em>
<p>From here your project should look like this:</p>
<ul>
<li>AppDelegate.h</li>
<li>AppDelegate.m</li>
<li>ViewController.h</li>
<li>ViewController.m</li>
<li>Main.storyboard</li>
<li>images.xcassets</li>
<li>LaunchScreen.xib</li>
</ul>
<h2 id="4-add-the-spritekit-framework-spritekitframework-to-the-project"><a href="#4-add-the-spritekit-framework-spritekitframework-to-the-project" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>4. Add the SpriteKit Framework 'SpriteKit.framework' to the project.</h2>
<p>Click the 'SpriteKitFromScratch' project in the 'Project Navigator' then from the 'Project and Targets List' (this might need to be toggled into view using the button in the top left) choose the 'SpriteKitFromScratch' target that was created when you added the 'Single View Application' target.</p>
<p>Click 'Build Phases'.</p>
<p>Expand 'Link Binary With Libraries'</p>
<p>Click [+] and type 'Sprite', click and add 'SpriteKit.framework'</p>
<img src="/images/posts/link-spritekit-ibrary.png" alt="Linking SpriteKit Framework to Project" class="mx-auto">
<h2 id="5-add-a-scene-class"><a href="#5-add-a-scene-class" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>5. Add a scene class</h2>
<p>Click anywhere in the 'Project Navigator' and choose 'New File' from the context menu. Choose 'Cocoa Touch Class', call it 'GameScene' and make it a subclass of 'SKScene'.</p>
<p>The SKScene is really the main file for any SpriteKit project. It's the root of the node tree that all other nodes are added to and its contents are rendered into view by the SKView that presents the scene.</p>
<p><em>Design wise you would likely subclass your own GameScene class into distinct game levels, maintaining common functionality on a parent class and addingÂ level specific functionality into subclasses.</em></p>
<h2 id="6-open-the-mainstoryboard-and-change-the-type-of-the-view-to-skview"><a href="#6-open-the-mainstoryboard-and-change-the-type-of-the-view-to-skview" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>6. Open the Main.storyboard and change the type of the View to 'SKView'.</h2>
<p>This will just change the type of the UIView in the storyboard to an SKView. You can of course just create this programatically if you want. I won't cover this because it's a lot of steps and even though this is a 'from scratch' tutorial, it's more a UIKit topic than SpriteKit.
<img src="/images/posts/xcode-identity-inspector.png" alt="Change UIView to SKView in Storyboard" class="mx-auto"></p>
<h2 id="7-open-viewcontrollerh"><a href="#7-open-viewcontrollerh" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>7. Open ViewController.h</h2>
<p>Import SpriteKit and GameScene:</p>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>SpriteKit<span class="token operator">/</span>SpriteKit<span class="token punctuation">.</span>h<span class="token operator">></span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token string">"GameScene.h"</span></span>

</code></pre></div>
<h2 id="8-open-viewcontrollerm"><a href="#8-open-viewcontrollerm" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>8. Open ViewController.m</h2>
<p>In the viewDidLoad method which will be called when the storyboard hands control to our view controller class, we want to grab the view (in this case an SKView) and tell the view to present our GameScene.</p>
<p>The shows* methods are for informational debugging purposes only. They are handy to have on when learning SpriteKit as you can see how many nodes are on the screen at any one time (good when you're only expecting a certain amount) and see what affect that has on the FPS.</p>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code>SKView <span class="token operator">*</span>skView <span class="token operator">=</span> <span class="token punctuation">(</span>SKView <span class="token operator">*</span><span class="token punctuation">)</span><span class="token keyword">self</span><span class="token punctuation">.</span>view<span class="token punctuation">;</span>
 
skView<span class="token punctuation">.</span>showsFPS <span class="token operator">=</span> YES<span class="token punctuation">;</span>
skView<span class="token punctuation">.</span>showsNodeCount <span class="token operator">=</span> YES<span class="token punctuation">;</span>
skView<span class="token punctuation">.</span>showsDrawCount <span class="token operator">=</span> YES<span class="token punctuation">;</span>
 
<span class="token punctuation">[</span>skView presentScene<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>GameScene alloc<span class="token punctuation">]</span> initWithSize<span class="token punctuation">:</span>skView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>size<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

</code></pre></div>
<p>For now we won't use the View Controller for anything other than an entry point into our GameScene(SKScene). Generally, you won't need to use the View Controller much in any SpriteKit project - for my purposes it's only came in handy when implementing features from other frameworks (i.e. Social).</p>
<h2 id="9-in-the-game-scene-implementation-add-a-label-to-the-scene-using--voiddidmovetoviewskview-view"><a href="#9-in-the-game-scene-implementation-add-a-label-to-the-scene-using--voiddidmovetoviewskview-view" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>9. In the game scene implementation, add a label to the scene usingÂ - (void)didMoveToView:(SKView *)view&lt;</h2>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>didMoveToView<span class="token punctuation">:</span><span class="token punctuation">(</span>SKView <span class="token operator">*</span><span class="token punctuation">)</span>view
<span class="token punctuation">{</span>
  <span class="token comment">// Create an SKLabelNode, generally this is how text is displayed in SpriteKit.</span>
  SKLabelNode <span class="token operator">*</span>label <span class="token operator">=</span> <span class="token punctuation">[</span>SKLabelNode labelNodeWithFontNamed<span class="token punctuation">:</span><span class="token string">@"Helvetica"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Set the text property to what we want to see.</span>
  label<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">@"Hello SpriteKit!"</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Set the position of the SKLabelNode to be in the center of the screen.</span>
  <span class="token comment">// The anchor point of an SKScene is 0.0, 0.0 by default, meaning if we</span>
  <span class="token comment">// added an object with the point 0.0, 0.0 it would appear in the bottom</span>
  <span class="token comment">// left hand corner of the screen. If we were to set it to the width and</span>
  <span class="token comment">// height of the scene it would appear in the top right hand side of the</span>
  <span class="token comment">// screen. In both cases we would then also have to offset for the width</span>
  <span class="token comment">// and height of the label whose anchor point is 0.5, 0.5 by default.</span>
  <span class="token comment">//</span>
  <span class="token comment">// Because the anchor point of the label is 0.5, 0.5 by default we don't</span>
  <span class="token comment">// need to offset its width and height attributes in order to make it appear</span>
  <span class="token comment">// in the center of the screen.</span>
  <span class="token comment">//</span>
  <span class="token comment">// Positioning and anchor points will likely be a subject of an upcoming </span>
  <span class="token comment">// tutorial.</span>
  label<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token function">CGPointMake</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Add the label to the scene.</span>
  <span class="token punctuation">[</span><span class="token keyword">self</span> addChild<span class="token punctuation">:</span>label<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>At this point if you stop and run this in the simulator you should see a scene with the words "Hello SpriteKit!".</p>
<h2 id="10-implement--voidtouchesbegannsset-touches-witheventuievent--event-in-the-game-scene-implementation"><a href="#10-implement--voidtouchesbegannsset-touches-witheventuievent--event-in-the-game-scene-implementation" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>10. ImplementÂ - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *) event in the game scene implementation</h2>
<p>SKScene is a responder object and therefore responds to touchesBegan, touchesEnded, etc. methods that will likely be familiar to anybody who has worked with UIKit apps before.</p>
<p>We'll write code to simply add a green square on the screen where ever the user touches.</p>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>touchesBegan<span class="token punctuation">:</span><span class="token punctuation">(</span>NSSet <span class="token operator">*</span><span class="token punctuation">)</span>touches withEvent<span class="token punctuation">:</span><span class="token punctuation">(</span>UIEvent <span class="token operator">*</span><span class="token punctuation">)</span>event
<span class="token punctuation">{</span>
  <span class="token comment">// We just need one touch, if you want to support multi touch</span>
  <span class="token comment">// loop through the touches collection and perform the actions</span>
  <span class="token comment">// for each touch within it.</span>
  UITouch <span class="token operator">*</span>touch <span class="token operator">=</span> <span class="token punctuation">[</span>touches anyObject<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Get the location from the touch.</span>
  CGPoint touchLocation <span class="token operator">=</span> <span class="token punctuation">[</span>touch locationInNode<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Create a green square.</span>
  SKSpriteNode <span class="token operator">*</span>greenSquare <span class="token operator">=</span> <span class="token punctuation">[</span>SKSpriteNode spriteNodeWithColor<span class="token punctuation">:</span><span class="token punctuation">[</span>SKColor greenColor<span class="token punctuation">]</span>
                                                           size<span class="token punctuation">:</span><span class="token function">CGSizeMake</span><span class="token punctuation">(</span><span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Name the object, this comes in handy.</span>
  greenSquare<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">@"square"</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Set the location of the square to the location the user touched.</span>
  greenSquare<span class="token punctuation">.</span>position <span class="token operator">=</span> touchLocation<span class="token punctuation">;</span>
 
  <span class="token comment">// Add the node to the scene.</span>
  <span class="token punctuation">[</span><span class="token keyword">self</span> addChild<span class="token punctuation">:</span>greenSquare<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>Run this in the simulator and click (touch?) the screen and you'll see a green square placed where you touched.</p>
<p>This code introduces the SKSpriteNode, which are really the building blocks of a SpriteKit project. In this instance I've instantiated an SKSpriteNode using a colour and size, but there are similar constructors for using an image or texture which calculates the size (and later on physical properties) for you.</p>
<p>You'll notice the green square is added in the centre of where you touched, not to the right or left. This is because the default anchor point of an SKSpriteNode is 0.5, 0.5, meaning the centre of the node is at the given position, as opposed to the bottom left (0.0, 0.0) or top right (1.0, 1.0).</p>
<p>We've also given the SKSpriteNode a name using its name property. This is handy for simple projects because SpriteKit gives us functions to enumerate a set of nodes based on name.</p>
<p>To orientate ourselves, so far we've:</p>
<ol>
	<li>Setup a blank project</li>
	<li>Added an iOS target with standard App Delegate, View Controller and Storyboard in place.</li>
	<li>Linked the SpriteKit framework</li>
	<li>Converted the Storyboard view to an SKView</li>
	<li>Added a subclass of SKScene, GameScene</li>
	<li>Pulled a reference to the SKView from the Storyboard, set some debugging options on it and used it to present ourÂ GameScene</li>
	<li>Added a label from the SKScene in the - (void)didMoveToView: (SKView *)view method</li>
	<li>Added a response to touch events to add SKSpriteNodes to the scene inÂ - (<span class="s1">void</span>)touchesBegan:(<span class="s2">NSSet</span> *)touches withEvent:(<span class="s2">UIEvent</span> *)event</li>
</ol>
<h3>11.Â Add animation using SKActions</h3>
So far we've created green squares where we touch on the screen, but they don't do anything. To make them a bit more interesting, we'll use SKActions to make the squares spin where they're placed.
<p>The SKAction class is used to create most animation effects that don't come as a direct result of physical interactions in SpriteKit. Using SKActions we can move sprites, fade them in and out of view, change their colour, change their size and even run arbitrary code against the node running the action.</p>
<p>Below we'll create an SKAction that rotates the node 360 degrees, then we'll wrap that SKAction in another SKAction that repeats an action forever and then we'll tell the green square to perform that action.</p>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>touchesBegan<span class="token punctuation">:</span><span class="token punctuation">(</span>NSSet <span class="token operator">*</span><span class="token punctuation">)</span>touches withEvent<span class="token punctuation">:</span><span class="token punctuation">(</span>UIEvent <span class="token operator">*</span><span class="token punctuation">)</span>event
<span class="token punctuation">{</span>
  <span class="token comment">// We just need one touch, if you want to support multi touch</span>
  <span class="token comment">// loop through the touches collection and perform the actions</span>
  <span class="token comment">// for each touch within it.</span>
  UITouch <span class="token operator">*</span>touch <span class="token operator">=</span> <span class="token punctuation">[</span>touches anyObject<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Get the location from the touch.</span>
  CGPoint touchLocation <span class="token operator">=</span> <span class="token punctuation">[</span>touch locationInNode<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Create a green square.</span>
  SKSpriteNode <span class="token operator">*</span>greenSquare <span class="token operator">=</span> <span class="token punctuation">[</span>SKSpriteNode spriteNodeWithColor<span class="token punctuation">:</span><span class="token punctuation">[</span>SKColor greenColor<span class="token punctuation">]</span>
  size<span class="token punctuation">:</span><span class="token function">CGSizeMake</span><span class="token punctuation">(</span><span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Name the object, this comes in handy.</span>
  greenSquare<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">@"square"</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Set the location of the square to the location the user touched.</span>
  greenSquare<span class="token punctuation">.</span>position <span class="token operator">=</span> touchLocation<span class="token punctuation">;</span>
 
  <span class="token comment">// Create an action that makes the square spin.</span>
  SKAction <span class="token operator">*</span>turn <span class="token operator">=</span> <span class="token punctuation">[</span>SKAction rotateByAngle<span class="token punctuation">:</span><span class="token number">360.0</span> duration<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Wrap the action in a repeatActionForever Action and tell the square to run</span>
  <span class="token comment">// that action.</span>
  <span class="token punctuation">[</span>greenSquare runAction<span class="token punctuation">:</span><span class="token punctuation">[</span>SKAction repeatActionForever<span class="token punctuation">:</span>turn<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Add the node to the scene.</span>
  <span class="token punctuation">[</span><span class="token keyword">self</span> addChild<span class="token punctuation">:</span>greenSquare<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>Run this in the simulator and see the effect it's had on our green squares.</p>
<h3>12. Add basic physics using SKPhysicsBody</h3>
Physics is added to a node through the physicsBody of the node, an instance of SKPhysics body is instantiated and assigned to the property and the presence of this SKPhysicsBody instance makes the SKScene evaluate the node as part of the Physics Word.
<p>The Physics World is automatically created when you instantiate an SKScene with default values that mimic real world properties.</p>
<p>gravity: 0.0, -9.8 (CGVector)
speed: 1.0 (CGFloat)</p>
<p>The speed is the speed of simulation, changing the speed to 2.0 will effectively double the speed of all physics simulations.</p>
<p>After you've completed the other steps in this project, try changing the gravity and speed properties of the SKPhysicsWorld of your SKScene to see the affect.</p>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token keyword">self</span><span class="token punctuation">.</span>physicsWorld<span class="token punctuation">.</span>gravity <span class="token operator">=</span> <span class="token function">CGVectorMake</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">self</span><span class="token punctuation">.</span>physicsWorld<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">;</span>
</code></pre></div>
<p>You can modify these properties to simulate different environments or create specific effects for your project.</p>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>touchesBegan<span class="token punctuation">:</span><span class="token punctuation">(</span>NSSet <span class="token operator">*</span><span class="token punctuation">)</span>touches withEvent<span class="token punctuation">:</span><span class="token punctuation">(</span>UIEvent <span class="token operator">*</span><span class="token punctuation">)</span>event
<span class="token punctuation">{</span>
  <span class="token comment">// We just need one touch, if you want to support multi touch</span>
  <span class="token comment">// loop through the touches collection and perform the actions</span>
  <span class="token comment">// for each touch within it.</span>
  UITouch <span class="token operator">*</span>touch <span class="token operator">=</span> <span class="token punctuation">[</span>touches anyObject<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Get the location from the touch.</span>
  CGPoint touchLocation <span class="token operator">=</span> <span class="token punctuation">[</span>touch locationInNode<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Create a green square.</span>
  SKSpriteNode <span class="token operator">*</span>greenSquare <span class="token operator">=</span> <span class="token punctuation">[</span>SKSpriteNode spriteNodeWithColor<span class="token punctuation">:</span><span class="token punctuation">[</span>SKColor greenColor<span class="token punctuation">]</span>
  size<span class="token punctuation">:</span><span class="token function">CGSizeMake</span><span class="token punctuation">(</span><span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Name the object, this comes in handy.</span>
  greenSquare<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">@"square"</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Set the location of the square to the location the user touched.</span>
  greenSquare<span class="token punctuation">.</span>position <span class="token operator">=</span> touchLocation<span class="token punctuation">;</span>
 
  <span class="token comment">// Create an action that makes the square spin.</span>
  SKAction <span class="token operator">*</span>turn <span class="token operator">=</span> <span class="token punctuation">[</span>SKAction rotateByAngle<span class="token punctuation">:</span><span class="token number">360.0</span> duration<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Wrap the action in a repeatActionForever Action and tell the square to run</span>
  <span class="token comment">// that action.</span>
  <span class="token punctuation">[</span>greenSquare runAction<span class="token punctuation">:</span><span class="token punctuation">[</span>SKAction repeatActionForever<span class="token punctuation">:</span>turn<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Make this a physical object affected by gravity.</span>
  greenSquare<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> <span class="token punctuation">[</span>SKPhysicsBody bodyWithRectangleOfSize<span class="token punctuation">:</span>greenSquare<span class="token punctuation">.</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Add the node to the scene.</span>
  <span class="token punctuation">[</span><span class="token keyword">self</span> addChild<span class="token punctuation">:</span>greenSquare<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>You create SKPhysicsBodys the size of the node you want to create physical interactions with, the interactions are based off the physics body, not the node. Physics Bodys can be created using the size property of their parent node, by combining other physics bodies, using polygons, circles or even textures (imagine creating a body for an octopus).</p>
<p>Now that our green squares have a physics body they will be subject to the physical properties of the physics world. So when we touch the screen to add a square, it should now start falling directly downward (remember the gravity vector is set to 0.0, 0.9).</p>
<h3>13. Create some physical interactions between nodes</h3>
We're going to do this by adding a physics body to the "Hello SpriteKit!" label we created earlier.
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>didMoveToView<span class="token punctuation">:</span><span class="token punctuation">(</span>SKView <span class="token operator">*</span><span class="token punctuation">)</span>view
<span class="token punctuation">{</span>
  <span class="token comment">// Create an SKLabelNode, generally this is how text is displayed in SpriteKit.</span>
  SKLabelNode <span class="token operator">*</span>label <span class="token operator">=</span> <span class="token punctuation">[</span>SKLabelNode labelNodeWithFontNamed<span class="token punctuation">:</span><span class="token string">@"Helvetica"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Set the text property to what we want to see.</span>
  label<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">@"Hello SpriteKit!"</span><span class="token punctuation">;</span>
 
  <span class="token comment">// We create a physics body the same size as the label.</span>
  label<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> <span class="token punctuation">[</span>SKPhysicsBody bodyWithRectangleOfSize<span class="token punctuation">:</span>label<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
  <span class="token comment">// Setting the dynamic property to no will cause the node to become static.</span>
  <span class="token comment">// Meaning the node will be unaffected by physical interactions.</span>
  label<span class="token punctuation">.</span>physicsBody<span class="token punctuation">.</span>dynamic <span class="token operator">=</span> NO<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>Simply adding a physics body to the label node is enough to cause it to interact with other physics body nodes because by default the physics node is set to interact with all other nodes.</p>
<p>This can later be changed using the categoryBitMask, collisionBitMask and collisionTestBitMask properties which we'll explore further in an upcoming tutorial.</p>
<p>Setting the dynamic property of the physics body causes the body to not be affected by physical interactions with other nodes. This means when it collides with a green square, it will not be displaced. It is also unaffected by the gravity of the physics world. Setting the dynamic property to YES (default) will cause it to fall to the ground immediately.</p>
<p>We could set the property of dynamic to NO and set the affectedByGravity property to NO and the label would stay put until displaced by the green squares. I've left both these properties in the Github source so you can easily play with the different combinations to see the effect.</p>
<h3>14. The update method</h3>
No introduction to SpriteKit would be complete without mention of the update method. The update method is called at the beginning of each revolution of the rendering loop. The update method is very powerful because no matter what actions you have applied or what physical interactions are about to occur you can make adjustments to any part of your scene before actions and physics are evaluated.
<p>We'll use the update method to do make some arbitrary changes to our scene. For every call to the update method, we'll enumerate all our green squares using the name we gave them toward the beginning of the tutorial. We'll check the position of each of the green squares, for each square that has fallen off the bottom of the screen we'll send it flying back up toward the top of the screen and change its colour. For every node that has shot off the top of the screen, we'll ensure it is removed from existence.</p>
<div class="nuxt-content-highlight"><pre class="language-objc line-numbers"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>update<span class="token punctuation">:</span><span class="token punctuation">(</span>NSTimeInterval<span class="token punctuation">)</span>currentTime
<span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token keyword">self</span> enumerateChildNodesWithName<span class="token punctuation">:</span><span class="token string">@"square"</span> usingBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">(</span>SKNode <span class="token operator">*</span>node<span class="token punctuation">,</span> BOOL <span class="token operator">*</span>stop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// Create an action that sends the square to the top and out of view.</span>
      SKAction <span class="token operator">*</span>goToTop <span class="token operator">=</span> <span class="token punctuation">[</span>SKAction moveToY<span class="token punctuation">:</span><span class="token keyword">self</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token operator">+</span>node<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span>
                                   duration<span class="token punctuation">:</span><span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token comment">// Create an action that changes the square's colour.</span>
      SKAction <span class="token operator">*</span>changeColour <span class="token operator">=</span> <span class="token punctuation">[</span>SKAction colorizeWithColor<span class="token punctuation">:</span><span class="token punctuation">[</span>SKColor blueColor<span class="token punctuation">]</span>
                                          colorBlendFactor<span class="token punctuation">:</span><span class="token number">0.7</span> duration<span class="token punctuation">:</span><span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token comment">// Combine the above 2 actions using a group.</span>
      SKAction <span class="token operator">*</span>goToTopAndChangeToBlue <span class="token operator">=</span> <span class="token punctuation">[</span>SKAction group<span class="token punctuation">:</span><span class="token operator">@</span><span class="token punctuation">[</span>goToTop<span class="token punctuation">,</span> changeColour<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token comment">// Remove the physics body to allow the above action to run unhindered.</span>
      node<span class="token punctuation">.</span>physicsBody <span class="token operator">=</span> nil<span class="token punctuation">;</span>

      <span class="token comment">// Run the action group.</span>
      <span class="token punctuation">[</span>node runAction<span class="token punctuation">:</span>goToTopAndChangeToBlue<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     
    <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> <span class="token keyword">self</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// Generally this is done automatically, but better safe than sorry.</span>
      <span class="token punctuation">[</span>node removeFromParent<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@"square removed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div>
<p>It's important to note the performance cost of enumerating through a list of nodes every time the frame is updated (this can be up to 60 times a second). In this case we won't notice any drop in performance, but in a project with a bit more going on, you might want to use the currentTime parameter the update method has passed to it to ensure you don't run any expensive algorithms more often than necessary.</p>
<p>Build and run in the simulator to see the result.</p>
<img src="/images/posts/spritekit-tutorial-end-result.png" alt="SpriteKitFromScratch running in iOS Simulator" class="mx-auto">
<p>That's it. Â I hope this tutorial has been a real hoot. I've written it in a way that teaches what I feel are some of the fundamentals of SpriteKit but that hopefully also encourages experimentation. Rather than having copied lines of code verbatim to recreate Flappy Bird, you should instead have some vital SpriteKit knowledge and a codebase that provides a solid foundation to experiment.</p>
<p>If you're looking for some things to experiment with, the following properties of these types are good candidates with this project.</p>
<ul>
<li>SKScene
<ul>
<li>scaleMode</li>
<li>physicsWorld (<a href="https://developer.apple.com/library/mac/documentation/SpriteKit/Reference/SKPhysicsWorld_Ref/" rel="nofollow noopener noreferrer" target="_blank">SKPhysicsWorld</a>)</li>
</ul>
</li>
<li>SKNode
<ul>
<li>zPosition</li>
<li>alpha</li>
<li>physicsBody (<a href="https://developer.apple.com/library/ios/documentation/SpriteKit/Reference/SKPhysicsBody_Ref/index.html" rel="nofollow noopener noreferrer" target="_blank">SKPhysicsBody</a>)</li>
<li>intersectsNode:</li>
</ul>
</li>
<li>SKSpriteNode
<ul>
<li>anchorPoint</li>
<li>color</li>
<li>colorBlendFactor</li>
<li>blendMode</li>
</ul>
</li>
</ul>
<p>The source code for this tutorial is <a href="https://github.com/tobygundry/SpriteKitFromScratch" rel="nofollow noopener noreferrer" target="_blank">available on Github</a>.</p></div></article></div></div><script defer src="/_nuxt/static/1652920291/2015-02-14-getting-started-with-spritekit/state.js"></script><script src="/_nuxt/2b22426.js" defer></script><script src="/_nuxt/d8e2892.js" defer></script><script src="/_nuxt/cf78498.js" defer></script><script src="/_nuxt/b8ed1c3.js" defer></script><script src="/_nuxt/8205f1b.js" defer></script>
  </body>
</html>
